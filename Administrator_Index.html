<!DOCTYPE html>
<html>
<body onload="Search_Data();"></body>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <link href="css/weui.min.css" rel="stylesheet">
    <link href="css/jquery-weui.css" rel="stylesheet">
    <link href="css/weixin_lv.css" rel="stylesheet">
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-weui.min.js"></script>
    <script src="js/weui.min.js"></script>
    <script src="js/jquery.cookie.min.js"></script>
    <title>贵阳一中李端棻中学欢迎您！</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.3.0/echarts.min.js"></script>
    <script>
	if (/Mobi|Android|iPhone/i.test(navigator.userAgent)) {
		alert('建议使用电脑或将手机横屏观看!');
	}
	var Search_Data = function () {
		setTimeout(function () {
			$.ajax(
					{
						url: 'https://api.ldfzxxsh.cyou/Administrator/Search',
						type: 'POST',
						dataType: 'json',
						success: function (response) {
							var cate = response['keys'];
							var barData = response['values'];
							var myChart = echarts.init(document.getElementById('main'));
							var option = {
								title: {
									text: response['title'],
									textStyle: {
										fontStyle: 'normal',
										fontWeight: "bolder",
										fontSize: 25
									},
									subtext: '技术支持：2023级10班朱天宇',
									subtextStyle: {
										fontStyle: 'normal',
										fontSize: 12,
										fontWeight: 'normal'
									},
									left: "center",
									top: "2.5%"
								},
								tooltip: {
									trigger: "axis",
									axisPointer: {
										type: "shadow",
									},
								},
								//图表位置
								grid: {
									left: "3%",
									right: "4%",
									bottom: "3%",
									containLabel: true,
								},
								//X轴
								xAxis: {
									type: "value",
									axisLine: {
										show: false,
									},
									axisTick: {
										show: false,
									},
									//不显示X轴刻度线和数字
									splitLine: {show: false},
									axisLabel: {show: false},
								},
								yAxis: {
									type: "category",
									data: cate,
									splitLine: {show: false},
									axisLine: {
										show: false,
									},
									axisTick: {
										show: false,
									},
									//key和图间距
									offset: 10,
									//动画部分
									animationDuration: 300,
									animationDurationUpdate: 300,
									//key文字大小
									nameTextStyle: {
										fontSize: 5,
									},
								},
								series: [
									{
										//柱状图自动排序，排序自动让Y轴名字跟着数据动
										realtimeSort: true,
										name: "总分",
										type: "bar",
										data: barData,
										barWidth: 14,
										barGap: 10,
										smooth: true,
										valueAnimation: true,
										//Y轴数字显示部分
										label: {
											normal: {
												show: true,
												position: "right",
												valueAnimation: true,
												offset: [5, -2],
												textStyle: {
													color: "#333",
													fontSize: 13,
												},
											},
										},
										itemStyle: {
											emphasis: {
												barBorderRadius: 7,
											},
											//颜色样式部分
											normal: {
												barBorderRadius: 7,
												color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [
													{offset: 0, color: "#3977E6"},
													{offset: 1, color: "#37BBF8"},
												]),
											},
										},
									},
								],
								animationDuration: 0,
								animationDurationUpdate: 3000,
								animationEasing: "linear",
								animationEasingUpdate: "linear",
							};
							myChart.setOption(option);
							window.addEventListener("resize", function () {
								myChart.resize();
							});
							Search_Data();
						},
						error: function () {
							var myChart = echarts.init(document.getElementById('main'));
							var option = {
								title: {
									text: "拉取数据失败！",
									textStyle: {
										fontStyle: 'normal',
										fontWeight: "bolder",
										fontSize: 25
									},
									left: "center",
									top: "2.5%"
								},
								tooltip: {
									trigger: "axis",
									axisPointer: {
										type: "shadow",
									},
								},
								grid: {
									left: "3%",
									right: "4%",
									bottom: "3%",
									containLabel: true,
								},
								animationDuration: 0,
								animationDurationUpdate: 3000,
								animationEasing: "linear",
								animationEasingUpdate: "linear",
							};
							myChart.setOption(option);
							window.addEventListener("resize", function () {
								myChart.resize();
							});
							Search_Data();
						}
					});
		}, 750)
	}
	</script>
	<style>
		body {
			background: url("https://img.picui.cn/free/2024/12/14/675d80f36fea2.png") no-repeat center center fixed;
			-webkit-background-size: cover;
			-o-background-size: cover;
			background-size: cover;
			background-position: center;
		}
	</style>
</head>


<body>
<div id="main" style="width: calc(92.5vw); height:calc(95vh); margin:auto; background-color:white; border-radius:15px; margin-top:calc(2.5vh)"></div>
</body>
<script src="https://www.jq22.com/jquery/jquery-1.10.2.js"></script>
<script type="text/javascript" src="./js/jquery.basictable.min.js"></script>
<script type="text/javascript" src="./js/reponsetable.min.js"></script>
<script type="text/javascript" src="js/layer.js"></script>
</html>
